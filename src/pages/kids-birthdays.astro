---
import Layout from "../layouts/Layout.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import PageHeader from "../components/PageHeader.astro";
import Cta from "../components/Cta.astro";
import { getKidsBirthdaysPage, type WPPage } from "../lib/wordpress";

// Fallback image
import paintPartyImg from "../assets/images/kids-art-paint-party.jpg";

// Try to fetch from WordPress
let wpPage: WPPage | null = null;
let useWordPress = false;

try {
    wpPage = await getKidsBirthdaysPage();
    if (wpPage?.acf) {
        useWordPress = true;
    }
} catch (error) {
    console.warn(
        "WordPress API unavailable for Kids Birthdays page, using fallback content",
    );
}

// Extract WordPress data or use fallback values
const acf = wpPage?.acf || {};

// Page content (WordPress or fallback)
const seoDescription =
    acf.seo?.seo_description ||
    "Celebrate your kids next birthday party with It's an Art Party! I bring the supplies and fun to you!";

// Description
const description =
    acf.main_content?.description ||
    "<p>Paint parties are a great way to celebrate while exploring art with family and friends!</p><p>Customize any project based on the birthday theme or the personal taste of the birthday boy or girl.</p>";

// Pricing
const pricing =
    acf.main_content?.pricing_text ||
    "All parties are $240 for up to 8 children. Add $20 for each additional child.";

// Features
const features = acf.main_content?.features || [
    { feature_text: "Starting From $240" },
    { feature_text: "Unlimited Design Themes" },
    { feature_text: "Up To 25 Guests" },
    { feature_text: "1 - 2 Hours (45-60 minute painting time)" },
    { feature_text: "Free Planning and Consultation" },
];

// Detail Cards
const details = acf.detail_cards || [
    {
        title: "What to Wear",
        description:
            "Dress for fun in clothes that will get a little messy and/or bring a smock to wear.",
        color: "#5BBAB5",
    },
    {
        title: "Art Supplies",
        description:
            "I bring the supplies to you and they are included in the party price.",
        color: "#F5C024",
    },
    {
        title: "Party Favors",
        description:
            "Guests get to take their custom painting home to display as a party favor!",
        color: "#EF6490",
    },
    {
        title: "Instruction",
        description:
            "I provide professional instruction for painting with hands-on help and guidance.",
        color: "#2B80B0",
    },
];
---

<Layout
    title="Kids Birthday Art Parties • It's an Art Party"
    description={seoDescription}
    image="/images/kids-art-paint-party.jpg"
>
    <Header showHero={false} />

    <main>
        <PageHeader
            title="PARTIES FOR KIDS"
            subtitle='"The world is but a canvas to the imagination." Henry David Thoreau'
        />

        <!-- Canvas Paint Parties Section -->
        <section class="bg-gray-50 py-12">
            <div class="container mx-auto px-4">
                <div
                    class="max-w-5xl mx-auto bg-white rounded-sm shadow-lg overflow-hidden"
                >
                    <!-- Header -->
                    <div class="bg-brand-pink py-4 text-center">
                        <h2
                            class="font-display text-3xl md:text-4xl text-white uppercase tracking-wide"
                        >
                            Canvas Paint Parties
                        </h2>
                    </div>

                    <div
                        class="p-6 md:p-10 flex flex-col md:flex-row gap-8 md:gap-12"
                    >
                        <!-- Left Content -->
                        <div class="flex-1">
                            <h3
                                class="font-display text-3xl text-brand-pink mb-4 uppercase"
                            >
                                Description
                            </h3>

                            <div
                                class="text-gray-600 mb-4 leading-relaxed space-y-3 prose prose-a:text-brand-pink prose-a:no-underline hover:prose-a:underline"
                                set:html={description}
                            />

                            <div class="text-gray-600 mb-6 leading-relaxed">
                                <p><strong>{pricing}</strong></p>
                                <p class="text-sm mt-2">
                                    A $75 non-refundable deposit is due at the
                                    time of booking and will be applied to the
                                    total amount on the day of the party.
                                </p>
                            </div>

                            <ul class="space-y-2 mb-8">
                                {
                                    features.map((item: any) => (
                                        <li class="flex items-center gap-3 text-gray-700 font-medium">
                                            <div class="bg-brand-pink rounded-full p-0.5">
                                                <svg
                                                    xmlns="http://www.w3.org/2000/svg"
                                                    class="h-3 w-3 text-white"
                                                    viewBox="0 0 20 20"
                                                    fill="currentColor"
                                                >
                                                    <path
                                                        fill-rule="evenodd"
                                                        d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"
                                                        clip-rule="evenodd"
                                                    />
                                                </svg>
                                            </div>
                                            {item.feature_text}
                                        </li>
                                    ))
                                }
                            </ul>

                            <a
                                href="/contact"
                                class="inline-block bg-brand-pink text-white px-8 py-3 rounded-full font-display font-bold uppercase text-lg hover:bg-pink-500 transition shadow-md"
                            >
                                Choose This
                            </a>
                        </div>

                        <!-- Right Content (Image) -->
                        <div class="flex-1 relative group">
                            <div
                                class="overflow-hidden rounded-lg shadow-md h-[400px] relative"
                            >
                                <img
                                    src={paintPartyImg.src}
                                    alt="Kids paint party"
                                    class="w-full h-full object-cover"
                                />
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Additional Details Section -->
                <div class="max-w-5xl mx-auto mt-12">
                    <h3
                        class="font-display text-3xl md:text-4xl text-brand-pink text-center uppercase mb-8"
                    >
                        Additional Details
                    </h3>

                    <div
                        class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"
                    >
                        {
                            details.map((card: any) => (
                                <div
                                    class="text-white p-8 text-center rounded-sm shadow-md flex flex-col items-center h-full"
                                    style={`background-color: ${card.color}`}
                                >
                                    <h4 class="font-display text-xl uppercase mb-3 font-bold">
                                        {card.title}
                                    </h4>
                                    <p class="text-sm leading-relaxed opacity-90">
                                        {card.description}
                                    </p>
                                </div>
                            ))
                        }
                    </div>
                </div>
            </div>
        </section>

        <!-- What to Expect Section -->
        <section
            class="bg-brand-pink py-16 text-white relative overflow-hidden"
        >
            <div
                class="absolute top-10 right-20 text-white text-4xl opacity-40"
            >
                ★
            </div>
            <div class="container mx-auto px-4 relative z-10">
                <h2 class="font-display text-4xl md:text-5xl mb-8 uppercase">
                    What to Expect
                </h2>
                <div class="max-w-3xl mx-auto">
                    <p class="font-body text-lg md:text-xl leading-relaxed">
                        Party planning includes selecting a theme for canvas
                        designs a week in advance of the party. I will create
                        black and white outline designs ahead of time on each
                        canvas for the kids to paint during the party. Upon
                        arrival, I will set up tables with all of the art
                        supplies (tables not included). Painting will take
                        approximately 45-60 minutes. I will clean up all art
                        supplies and prepare your tables for other activities of
                        your choosing (food and drinks not included). If there
                        is anything else I can do to assist during the party,
                        just ask! I am here to help! Most parties only require
                        access to trash cans and sinks.
                    </p>
                </div>
            </div>
        </section>

        <Cta
            title="Plan Your Party Today!"
            subtitle="Call or Text: 980-253-4829"
        />
    </main>

    <Footer />
</Layout>
